<section class="mw-700 d-flex justify-content-between mb-3">
  <%= form_with url: tasks_path, method: :get, class: "d-flex" do %>
    <%= text_field_tag :query,
      params[:query],
      class: "form-control search-bar",
      placeholder: "Find a task"
    %>
  <% end %>
  <%= link_to 'ADD TASK', new_task_path, class: 'primary-btn' if policy(Task).new? %>
</section>
<section class="mw-700 mb-3">
  <div class="network-grid border-bottom mb-4">
    <h6 class="headers">TASK</h6>
    <h6 class="headers">TECHNICIAN</h6>
    <h6 class="headers">DUE DATE</h6>
    <h6 class="headers">NETWORK</h6>
    <h6 class="headers">STATUS</h6>
    <!-- <h6 class="headers">SCHEDULE</h6> -->
  </div>
  <% @tasks.each do |task| %>
    <div class="network">
      <%= link_to task_path(task), class: 'text-decoration-none' do %>
        <div class="network-grid">
          <p><%= task.title.upcase %></p>
          <p><%= task.technician.full_name.upcase %></p>
          <p><%= task.end_date.strftime('%d/%m/%Y') %></p>
          <p><%= task.network.name.upcase %></p>
          <p class="<%= task.completed ? 'task-green' : 'task-red' %>"></p>
          <p><%#= task.schedule.upcase %></p>
        </div>
      <% end %>
      <% if policy(task).new? %>
        <div class="menu-options dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          •••
        </div>
        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
          <%= link_to "EDIT", edit_task_path(task), class: "dropdown-item" %>
          <%= link_to "DELETE", task_path(task), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete the task #{task.title}?"}, class: "dropdown-item" %>
        </div>
      <% end %>
    </div>
  <% end %>
</section>

